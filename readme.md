## Цель:
Реализовать систему хранения и обмена данными о контактах, содержащими имя, категорию, дату рождения, возраст и номер телефона. Система должна обеспечивать ввод данных, отображение, сохранение контактов в текстовый файл и загрузку из файла.

## ФТ:
1. Пользователь должен иметь возможность вводить данные контактов с клавиатуры. Каждый введённый контакт добавляется в массив в порядке ввода.
2. Пользователь должен иметь возможность вывести список всех контактов на экран в порядке ввода
3. Программа должна предоставлять два режима сохранения:
   - Создание нового файла: все текущие записи массива сохраняются в новый файл.  
   - Добавление в существующий файл: новые записи должны быть добавлены в конец файла без изменения уже сохранённых данных.  
4. Имя файла пользователь выбирает самостоятельно. Если файл существует и выбран режим добавления, программа должна корректно дописывать только отсутствующие записи — в конец файла, сохраняя формат.
5. Пользователь должен иметь возможность загрузить контакты из текстового файла в массив данных.
6. Программа должна предоставлять меню с пунктами:  
   - ввод записи,  
   - вывод записей,  
   - сохранение в файл,  
   - загрузка из файла,  
   - выход.

## НФТ:
1. Программа должна иметь модульную архитектуру: функции ввода, вывода, хранения и работы с файлами должны быть разделены на отдельные модули (.h/.cpp).
2. Исходный код должен быть структурирован:  
   - каталог include/ — заголовочные файлы (.h),  
   - каталог src/ — файлы реализации (.cpp),  
   - каталог data/ — тестовые файлы с контактами.
3. Программа должна корректно обрабатывать:  
   - отсутствие файла,  
   - невозможность открыть файл,  
   - некорректный формат данных.
4. Данные должны сохраняться в текстовом формате с фиксированными разделителями (;)
5. Кол-во записей в массиве ограничены 100 единицами
6. Необходимо отличать пользователей с одинаковыми именами

## Data model
Контакт представляется следующими полями:

| Поле          | Тип              | Описание                                 |
|---------------|------------------|------------------------------------------|
| `id`          | целое число      | Уникалный идентификатор                  |
| `name`        | строка           | Имя контакта                             |
| `category`    | строка           | Категория контакта (друг, семья и т.п.)  |
| `birthday`    | строка           | Дата рождения                            |
| `age`         | целое число      | Возраст                                  |
| `phone`       | строка           | Номер телефона                           |
| `deleted`     | bool             | Логическое удаление записи               |

Пример строки в файле:

```text
Id;Имя;Категория;ДатаРождения;Возраст;Телефон;true/false
```

Зачем нужен id?
Потому что:
- name не уникально — два человека могут иметь одно имя.
- phone тоже не всегда уникально (семейные номера, корпоративные SIM).
- category, birthday, age — точно неуникальны.
- позволит реализовать:
    - редактирование записи,
    - удаление по id,
    - построение индекса,
    - бинарный поиск.

## Файловая структура исходного кода:
```
project_root/
├─ include/   # заголовочные файлы (.h)
│  ├─ contacts.h
│  ├─ file_io.h
│  └─ menu.h
├─ src/       # файлы реализации (.cpp)
│  ├─ main.cpp
│  ├─ contacts.cpp
│  ├─ file_io.cpp
│  └─ menu.cpp
└─ data/      # тестовые файлы с контактами
   ├─ contacts_sample_1.txt
   └─ contacts_sample_2.txt
```

## Functional Specification
Функции для реализации бизнес-логики:
- inputContact() - ввод котакта
- printContacts() - вывод всех котактов
- saveToFile(filename, mode) - сохранение в файл
- loadFromFile(filename) - загрузка из файла

Функции для реализации НФТ:
  - Валидация полей Contact:
     - validateName(string)
     - validatePhone(string) 
     - validateBirthday(string)
     - validateAge(int) 
     - validateCategory(string)
  - Обработка ошибок работы с файлами:
     - fileExists(filename)
     - openFile(filename, mode)
     - handleFileError(code)
   - Технические функции:
     - generateId()
     - parseContactFromString(line)
     - serializeContactToString(contact)

Иерархия вызовов:
```
inputContact()
 ├─ validateName()
 ├─ validatePhone()
 ├─ validateBirthday()
 ├─ validateAge()
 ├─ validateCategory()
 ├─ generateId()
 └─ addToArray()

printContacts()
 └─ formatContactForOutput()   (опционально)

saveToFile()
 ├─ openFile(filename, mode)
 │    └─ handleFileError()
 ├─ serializeContactToString()
 └─ writeLineToFile()

loadFromFile()
 ├─ fileExists(filename)
 │    └─ handleFileError()
 ├─ openFile(filename, READ)
 │    └─ handleFileError()
 ├─ readLine()
 ├─ parseContactFromString()
 │    ├─ validateName()
 │    ├─ validatePhone()
 │    ├─ validateBirthday()
 │    ├─ validateAge()
 │    └─ validateCategory()
 └─ addToArray()
```


Требования к полям:
- Поле id является уникальным идентификатором записи, назначается автоматически функцией generateId() и не зависит от пользовательского ввода. Уникальный ключ не должен зависеть от способа хранения.
- Поле phone хранится как строка, поскольку телефонные номера не являются числовыми значениями и могут содержать символы «+», «-», пробелы, скобки, а также могут начинаться с нуля. Тип string позволяет избежать потери данных и упрощает проверку формата.

Почему лучше заполнять id отдельной функцией:
исключаем ошибки в ручном вводе;
автоматически поддерживаем инкремент (1,2,3,4…);
сохраняем целостность данных;
обеспечиваем уникальность;
разделяем ответственность модулей (solid-principles).